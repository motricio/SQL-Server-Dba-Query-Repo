DECLARE @loginname nvarchar(100);
SELECT @loginname=name from sys.server_principals where [SID]=0x01

SELECT 
    [B].[class]
        , [B].[class_desc]
        , [B].[major_id]
        , [B].[minor_id]
        , [B].[grantee_principal_id]
        , [B].[grantor_principal_id]
        , [B].[type]
        , [B].[permission_name]
        , [B].[state]
        , [B].[state_desc]
        , [A].name AS grantee_principal_name
        , [A].type_desc AS grantee_principal_type_desc
        --, [C].name AS grantor_name
  , [C].[name] AS [owner]
        , CASE 
            WHEN [B].state = N'W'
                THEN N'GRANT'
            ELSE [B].state_desc
            END + N' ' + [B].permission_name COLLATE SQL_Latin1_General_CP1_CI_AS + N' TO ' + QUOTENAME([A].name) AS permissionstatement
  ,'ALTER AUTHORIZATION ON '+[B].[class_desc]+':: TO ['+@loginname+'];'
FROM 
     sys.server_principals AS A
INNER JOIN sys.server_permissions AS B ON (B.grantee_principal_id = A.principal_id)
INNER JOIN sys.server_principals AS C ON (C.principal_id = B.grantor_principal_id)
WHERE C.[name] <> @loginname
ORDER BY 
  [A].name
    ,[B].permission_name
